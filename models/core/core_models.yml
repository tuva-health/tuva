version: 2
models:
  - name: core__appointment
    description: |
      The core appointment table contains information related to appointments at a healthcare facility. This table may include canceled, completed,  or scheduled events.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: appointment
      tags: core
      materialized: table
    columns:
      - name: appointment_id
        description: Unique identifier for the appointment.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
          is_primary_key: true
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: source_appointment_type_code
        description: Appointment type code from the source.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-type
          data_type: varchar
      - name: source_appointment_type_description
        description: Appointment type description from the source.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-type
          data_type: varchar
      - name: normalized_appointment_type_code
        description: Normalized appointment type code.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-type
          data_type: varchar
      - name: normalized_appointment_type_description
        description: Normalized appointment type description.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-type
          data_type: varchar
      - name: start_datetime
        description: The start date/time of the appointment or service.
        meta:
          data_type: timestamp
      - name: end_datetime
        description: The end date/time of the appointment or service.
        meta:
          data_type: timestamp
      - name: duration
        description: Number of minutes that the appointment or service is to take.
        meta:
          data_type: number
      - name: location_id
        description: Unique identifier for each location.
        meta:
          data_type: varchar
      - name: practitioner_id
        description: Unique identifier for the practitioner on record (e.g., ordered medication, performed the procedure, etc).
        meta:
          data_type: varchar
      - name: source_status
        description: Status of the appointment from the source system.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-status
          data_type: varchar
      - name: normalized_status
        description: The normalized status of the appointment.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-status
          data_type: varchar
      - name: appointment_specialty
        description: Specialty of a practitioner that would be required to perform the service requested in this appointment.
        meta:
          data_type: varchar
      - name: reason
        description: Free text reason for the appointment or service.
        meta:
          data_type: varchar
      - name: source_reason_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_reason_code
        description: The code in the source system for the appointment reason (e.g., ICD-10 code).
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-cm
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_reason_description
        description: Description of the source code for the appointment reason in the source system (e.g., ICD-10 description).
        meta:
          data_type: varchar
      - name: normalized_reason_code_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_reason_code
        description: The normalized code for the appointment reason (e.g., ICD-10 code).
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-cm
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_reason_description
        description: Normalized description of the code for the appointment reason (e.g., ICD-10 description).
        meta:
          data_type: varchar
      - name: cancellation_reason
        description: Free text reason why the appointment was cancelled.
        meta:
          data_type: varchar
      - name: source_cancellation_reason_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_cancellation_reason_code
        description: The code in the source system for the cancellation reason.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-cancellation-reason
          data_type: varchar
      - name: source_cancellation_reason_description
        description: Description of the source code for the cancellation reason in the source system.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-cancellation-reason
          data_type: varchar
      - name: normalized_cancellation_reason_code_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_cancellation_reason_code
        description: The normalized code for the cancellation reason.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-cancellation-reason
          data_type: varchar
      - name: normalized_cancellation_reason_description
        description: Normalized description of the code for the cancellation reason.
        meta:
          terminology: https://thetuvaproject.com/terminology/appointment-cancellation-reason
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__condition
    description: |
      The core condition table contains information related to medical  conditions patients have, including problems, admitting diagnosis codes,  and billable diagnosis codes.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: condition
      tags: core
      materialized: table
    columns:
      - name: condition_id
        description: Unique identifier for each condition in the table.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: claim_id
        description: Unique identifier for a claim. Each claim represents a distinct healthcare service or set of services provided to a patient.
        meta:
          data_type: varchar
      - name: recorded_date
        description: Date when the condition was recorded.
        meta:
          data_type: date
      - name: onset_date
        description: Date when the condition first occurred.
        meta:
          data_type: date
      - name: resolved_date
        description: Date when the condition was resolved.
        meta:
          data_type: date
      - name: status
        description: Status of the record (e.g., condition, test, etc).
        meta:
          data_type: varchar
      - name: condition_type
        description: The type of condition i.e. problem, admitting, or billing.
        meta:
          data_type: varchar
      - name: source_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-cm
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: normalized_code_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_code
        description: The normalized code.
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-cm
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_description
        description: Normalized description of the code.
        meta:
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: condition_rank
        description: The numerical ranking of a diagnosis code in a claim.  Principle  diagnosis code is given a ranking of 1. Claims data typically has a  strict ranking of conditions whereas medical records will often not  have this information or the information won't be accurate.
        data_type: integer
        meta:
          data_type: number
      - name: present_on_admit_code
        description: The present_on_admit_code related to the condition.
        meta:
          terminology: https://thetuvaproject.com/terminology/present-on-admission
          data_type: varchar
      - name: present_on_admit_description
        description: The description of the present_on_admit_code for the condition.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__eligibility
    description: |
      The eligibility table contains information on patient health plan and  supplemental insurance eligibility.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: eligibility
      tags: core
      materialized: table
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - eligibility_id
            - data_source
    columns:
      - name: eligibility_id
        description: Unique identifier for each eligibility row in the table.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: subscriber_id
        description: Identifier that links a patient to a particular insurance product or health plan.
        meta:
          data_type: varchar
      - name: birth_date
        description: The birth date of the patient.
        meta:
          data_type: date
      - name: death_date
        description: Date the patient died if there is one.
        meta:
          data_type: date
      - name: enrollment_start_date
        description: Date the patient's insurance eligibility began.
        meta:
          data_type: date
      - name: enrollment_end_date
        description: Date the patient's insurance eligibility ended.
        meta:
          data_type: date
      - name: payer
        description: Name of the payer (i.e. health insurer) providing coverage.
        meta:
          data_type: varchar
      - name: payer_type
        description: Type of payer (e.g. commercial, medicare, medicaid, etc.).
        meta:
          terminology: https://thetuvaproject.com/terminology/payer-type
          data_type: varchar
      - name: plan
        description: Name of the plan (i.e. sub contract) providing coverage.
        meta:
          data_type: varchar
      - name: original_reason_entitlement_code
        description: Original reason for Medicare entitlement code.
        meta:
          terminology: https://thetuvaproject.com/terminology/medicare-orec
          data_type: varchar
      - name: dual_status_code
        description: Indicates whether the patient is dually eligible for Medicare and Medicaid.
        meta:
          terminology: https://thetuvaproject.com/terminology/medicare-dual-eligibility
          data_type: varchar
      - name: medicare_status_code
        description: Indicates how the patient became eligible for Medicare.
        meta:
          terminology: https://thetuvaproject.com/terminology/medicare-status
          data_type: varchar
      - name: fips_state_code
        description: FIPS code for the state the patient lives in (most recent known address).
        meta:
          data_type: varchar
      - name: normalized_state_name
        description: State for the patient (most recent known address).
        meta:
          data_type: varchar
      - name: fips_state_abbreviation
        description: Abbreviated form of the state for the patient (most recient known address).
        meta:
          data_type: varchar
      - name: subscriber_relation
        description: The patient's relationship to the subscriber (e.g., self, spouse, child).
        meta:
          data_type: varchar
      - name: group_id
        description: The group id which multiple members are enrolled for health coverage.
        meta:
          data_type: varchar
      - name: group_name
        description: The group name under which multiple members are enrolled for health coverage.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: file_date
        description: The date associated with the claims file, typically reflecting the reporting period of the claims data.
        meta:
          data_type: date
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: varchar
  - name: core__encounter
    description: |
      The encounter table contains information about patients visits (i.e.  encounters).  This includes acute inpatient, emergency department, office  visits, SNF stays, etc.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: encounter
      tags:
        - core
        - encounters
      materialized: table
    columns:
      - name: _dbt_source_relation
        description: dbt utils metadata column to indicate the source table from unioning tables together.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        tests:
          - unique
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_data_source_id
        description: Identifier for the source system from which patient data originated.
      - name: encounter_type
        description: Indicates the type of encounter e.g. acute inpatient, emergency department, etc.
        meta:
          terminology: https://thetuvaproject.com/terminology/encounter-type
          data_type: varchar
      - name: encounter_group
        description: Categorization of the encounter into groups based on predefined criteria.
        meta:
          data_type: varchar
      - name: encounter_start_date
        description: Date when the encounter started.
        meta:
          data_type: date
      - name: encounter_end_date
        description: Date when the encounter ended.
        meta:
          data_type: date
      - name: length_of_stay
        description: Length of the encounter calculated as encounter_end_date - encounter_start_date.
        meta:
          data_type: number
      - name: admit_source_code
        description: Indicates where the patient was before the healthcare encounter (inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/admit-source
          data_type: varchar
      - name: admit_source_description
        description: Description of the admit_source_code for the encounter.
        meta:
          data_type: varchar
      - name: admit_type_code
        description: Indicates the type of admission (inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/admit-type
          data_type: varchar
      - name: admit_type_description
        description: Description of the admit_type_code for the encounter.
        meta:
          data_type: varchar
      - name: discharge_disposition_code
        description: Indicates the type of setting the patient was discharged to (institutional inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/discharge-disposition
          data_type: varchar
      - name: discharge_disposition_description
        description: Description of the discharge_disposition_code for the encounter.
        meta:
          data_type: varchar
      - name: attending_provider_id
        description: ID for the attending provider on the encounter.
        meta:
          data_type: varchar
      - name: attending_provider_name
        description: Name of the attending provider on the encounter.
        meta:
          data_type: varchar
      - name: facility_id
        description: Facility ID for the claim (typically represents the facility where services were performed).
        meta:
          data_type: varchar
      - name: facility_name
        description: Facility name.
        meta:
          data_type: varchar
      - name: facility_type
        description: The type of facility e.g. acute care hospital.
        meta:
          data_type: varchar
      - name: observation_flag
        description: Indicates whether the encounter was marked as an observation stay (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: lab_flag
        description: Indicates whether lab services were utilized during the encounter (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: dme_flag
        description: Indicates whether durable medical equipment (DME) was used during the encounter (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: ambulance_flag
        description: Indicates whether ambulance services were utilized during the encounter (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: pharmacy_flag
        description: Indicates whether pharmacy services were utilized during the encounter (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: ed_flag
        description: Indicates whether the encounter involved an emergency department visit (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: delivery_flag
        description: Indicates whether the encounter involved a delivery (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: delivery_type
        description: Type of delivery that occurred during the encounter, if applicable.
        meta:
          data_type: varchar
      - name: newborn_flag
        description: Indicates whether the encounter was for a newborn (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: nicu_flag
        description: Indicates whether the newborn was admitted to the Neonatal Intensive Care Unit (NICU) during the encounter (1 for yes, 0 for no).
        meta:
          data_type: number
      - name: snf_part_b_flag
        description: Indicates whether the inpatient medical service for Medicare covers under Part B or not. (1 for yes and 0 for no)
        meta:
          data_type: number
      - name: primary_diagnosis_code_type
        description: The type of condition code reported in the source system e.g. ICD-10-CM.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: primary_diagnosis_code
        description: Primary diagnosis code for the encounter. If from claims the primary diagnosis code comes from the institutional claim.
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-cm
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: primary_diagnosis_description
        description: Description of the primary diagnosis code.
        meta:
          data_type: varchar
      - name: drg_code_type
        description: The DRG system used for the claim.
        meta:
          data_type: varchar
      - name: drg_code
        description: The DRG code on the claim.
        meta:
          data_type: varchar
      - name: drg_description
        description: The description for the DRG code used on the claim.
        meta:
          data_type: varchar
      - name: paid_amount
        description: The total amount paid by the insurer.
        meta:
          data_type: number
      - name: allowed_amount
        description: The total amount allowed (includes amount paid by the insurer and patient).
        meta:
          data_type: number
      - name: charge_amount
        description: The total amount charged for the services provided, before any adjustments or payments. This is typically in US dollars.
        meta:
          data_type: number
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: claim_count
        description: The number of claims associated with the encounter or record.
        meta:
          data_type: number
      - name: inst_claim_count
        description: Number of institutional claims generated from the encounter.
        meta:
          data_type: number
      - name: prof_claim_count
        description: Number of professional claims generated from the encounter.
        tests:
          - the_tuva_project.expect_column_values_to_be_between:
              description: Inpatient encounter missing professional claim
              min_value: 1
              row_condition: encounter_type = 'acute inpatient'
              strictly: false
              tags:
                - tuva_dqi_sev_5
                - dqi
              config:
                severity: warn
                enabled: '{{ (var(''claims_enabled'', false)) | as_bool }}'
        meta:
          data_type: number
      - name: source_model
        description: Indicates the DBT source relation name from which data is derived.
        meta:
          data_type: varchar
      - name: encounter_source_type
        description: Indicates whether the encounter is from a claims or clinical data source
        meta:
          data_type: varchar
      - name: attending_provider_id
        description: ID for the attending provider on the encounter.
        meta:
          data_type: varchar
      - name: attending_provider_name
        description: Name of the attending provider on the encounter.
        meta:
          data_type: varchar
      - name: facility_id
        description: Facility ID for the claim (typically represents the facility where services were performed).
        meta:
          data_type: varchar
      - name: facility_name
        description: Facility name.
        meta:
          data_type: varchar
      - name: facility_type
        description: The type of facility e.g. acute care hospital.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__immunization
    description: |
      The immunization table contains information on immunizations administered to patients, including the vaccine code, description, and administration date.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: immunization
      tags: core
      materialized: table
    columns:
      - name: immunization_id
        description: Unique identifier for each immunization.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
          is_primary_key: true
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: source_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/cvx
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: normalized_code_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_code
        description: The normalized code.
        meta:
          terminology: https://thetuvaproject.com/terminology/cvx
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_description
        description: Normalized description of the code.
        meta:
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: status
        description: Status of the record (e.g., condition, test, etc).
        meta:
          data_type: varchar
      - name: status_reason
        description: Indicates reason the event was not performed. (e.g., condition, test, immunization etc).
        meta:
          data_type: varchar
      - name: occurrence_date
        description: Date the event occured or was to be occured.
        meta:
          data_type: date
      - name: source_dose
        description: The quantity of vaccine product that was administered.
        meta:
          data_type: varchar
      - name: normalized_dose
        description: Normalized quantity of vaccine product that was administered.
        meta:
          data_type: varchar
      - name: lot_number
        description: Lot number of the vaccine product.
        meta:
          data_type: varchar
      - name: body_site
        description: The body site where the vaccine was administered.
        meta:
          data_type: varchar
      - name: route
        description: The route used to administer the medication and/or vaccine.
        meta:
          data_type: varchar
      - name: location_id
        description: Unique identifier for each location.
        meta:
          data_type: varchar
      - name: practitioner_id
        description: Unique identifier for the practitioner on record (e.g., ordered medication, performed the procedure, etc).
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__lab_result
    description: |
      The lab result table contains information about lab test results, including the LOINC code and description, units, reference range,  and result.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: lab_result
      tags: core
      materialized: table
    columns:
      - name: lab_result_id
        description: Unique identifier for each lab result.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: accession_number
        description: The lab order number from the source system.
        meta:
          data_type: varchar
      - name: source_order_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_order_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/loinc
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_order_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: source_component_type
        description: The type of code for the component reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          data_type: varchar
      - name: source_component_code
        description: The code for the component in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/loinc
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_component_description
        description: Description of the source code for the component in the source system.
        meta:
          data_type: varchar
      - name: normalized_order_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_order_code
        description: The normalized code.
        meta:
          terminology: https://thetuvaproject.com/terminology/loinc
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_order_description
        description: Normalized description of the code.
        meta:
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: normalized_component_type
        description: The normalized type of code for the component.
        meta:
          data_type: varchar
      - name: normalized_component_code
        description: The normalized code for the component.
        meta:
          terminology: https://thetuvaproject.com/terminology/loinc
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_component_description
        description: Normalized description of the code for the component.
        meta:
          data_type: varchar
      - name: status
        description: Status of the record (e.g., condition, test, etc).
        meta:
          data_type: varchar
      - name: result
        description: The result of the record (e.g., lab test, observation, etc).
        meta:
          data_type: varchar
      - name: result_datetime
        description: Datetime of the test result.
        meta:
          data_type: timestamp
      - name: collection_datetime
        description: Datetime the specimen was collected.
        meta:
          data_type: timestamp
      - name: source_units
        description: Source units of the lab test.
        meta:
          data_type: varchar
      - name: normalized_units
        description: Normalized units of the lab test.
        meta:
          data_type: varchar
      - name: source_reference_range_low
        description: The low end of the reference range from the source system.
        meta:
          data_type: varchar
      - name: source_reference_range_high
        description: The high end of the reference range from the source system.
        meta:
          data_type: varchar
      - name: normalized_reference_range_low
        description: The normalized low end of the reference range.
        meta:
          data_type: varchar
      - name: normalized_reference_range_high
        description: The normalized high end of the reference range.
        meta:
          data_type: varchar
      - name: source_abnormal_flag
        description: Indicates whether the result is abnormal or normal.
        meta:
          data_type: varchar
      - name: normalized_abnormal_flag
        description: Normalized abnormal flag.
        meta:
          data_type: varchar
      - name: specimen
        description: The type of specimen e.g. blood, plasma, urine.
        meta:
          data_type: varchar
      - name: ordering_practitioner_id
        description: Unique identifier for the practitioner who ordered the lab test.
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__location
    description: |
      The location table contains information on practice and facility locations  where patients receive medical care.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: location
      tags: core
      materialized: table
    columns:
      - name: location_id
        description: Unique identifier for each location.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
      - name: npi
        description: The national provider identifier associated with the record e.g. facility_npi, provider_npi
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: name
        description: The name of the location.
        meta:
          data_type: varchar
      - name: facility_type
        description: The type of facility e.g. acute care hospital.
        meta:
          data_type: varchar
      - name: parent_organization
        description: The parent organization associated with the facility.
        meta:
          data_type: varchar
      - name: address
        description: The street address of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: city
        description: The city of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: state
        description: The state of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: zip_code
        description: The zip code of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: latitude
        description: The latitude of the record (e.g., facility location, patient, etc).
        meta:
          data_type: float
      - name: longitude
        description: The longitude of the record (e.g., facility location, patient, etc).
        meta:
          data_type: float
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__medical_claim
    description: |
      The medical claim table contains information on services rendered to patients and billed by the provider to the insurer as claims.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: medical_claim
      tags:
        - core
        - encounters
      materialized: table
    columns:
      - name: medical_claim_id
        description: Unique identifier for each row in the table.
        tests:
          - unique
          - not_null
        meta:
          data_type: varchar
      - name: claim_id
        description: Unique identifier for a claim. Each claim represents a distinct healthcare service or set of services provided to a patient.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: claim_line_number
        description: Indicates the line number for the particular line of the claim.
        tests:
          - not_null
        data_type: integer
        meta:
          data_type: number
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: encounter_type
        description: Indicates the type of encounter e.g. acute inpatient, emergency department, etc.
        meta:
          data_type: varchar
      - name: encounter_group
        description: Categorization of the encounter into groups based on predefined criteria.
        meta:
          data_type: varchar
      - name: claim_type
        description: Indicates whether the claim is professional (CMS-1500), institutional (UB-04), dental, or vision.
        meta:
          terminology: https://thetuvaproject.com/terminology/claim-type
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: payer
        description: Name of the payer (i.e. health insurer) providing coverage.
        meta:
          data_type: varchar
      - name: plan
        description: Name of the plan (i.e. sub contract) providing coverage.
        meta:
          data_type: varchar
      - name: claim_start_date
        description: 'The date when the healthcare service was provided. Format: YYYY-MM-DD.'
        meta:
          data_type: date
      - name: claim_end_date
        description: End date for the claim.
        meta:
          data_type: date
      - name: claim_line_start_date
        description: Start date for the claim line.
        meta:
          data_type: date
      - name: claim_line_end_date
        description: End date for the claim line.
        meta:
          data_type: date
      - name: admission_date
        description: Admission date for the claim (inpatient claims only).
        meta:
          data_type: date
      - name: discharge_date
        description: Discharge date for the claim (inpatient claims only).
        meta:
          data_type: date
      - name: service_category_1
        description: The broader service category this claim belongs to.
        meta:
          terminology: https://thetuvaproject.com/value-sets/service-categories
          data_type: varchar
      - name: service_category_2
        meta:
          terminology: https://thetuvaproject.com/value-sets/service-categories
          data_type: varchar
        description: The more specific service category this claim belongs to.
      - name: service_category_3
        description: The most specific service category this claim belongs to.
        meta:
          data_type: varchar
      - name: admit_source_code
        description: Indicates where the patient was before the healthcare encounter (inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/admit-source
          data_type: varchar
      - name: admit_source_description
        description: Description of the admit_source_code for the encounter.
        meta:
          data_type: varchar
      - name: admit_type_code
        description: Indicates the type of admission (inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/admit-type
          data_type: varchar
      - name: admit_type_description
        description: Description of the admit_type_code for the encounter.
        meta:
          data_type: varchar
      - name: discharge_disposition_code
        description: Indicates the type of setting the patient was discharged to (institutional inpatient claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/discharge-disposition
          data_type: varchar
      - name: discharge_disposition_description
        description: Description of the discharge_disposition_code for the encounter.
        meta:
          data_type: varchar
      - name: place_of_service_code
        description: Place of service for the claim (professional claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/place-of-service
          data_type: varchar
      - name: place_of_service_description
        description: Place of service description.
        meta:
          data_type: varchar
      - name: bill_type_code
        description: Bill type code for the claim (institutional claims only).
        meta:
          terminology: https://thetuvaproject.com/terminology/bill-type
          data_type: varchar
      - name: bill_type_description
        description: Bill type description.
        meta:
          data_type: varchar
      - name: drg_code_type
        description: The DRG system used for the claim.
        meta:
          data_type: varchar
      - name: drg_code
        description: The DRG code on the claim.
        meta:
          data_type: varchar
      - name: drg_description
        description: The description for the DRG code used on the claim.
        meta:
          data_type: varchar
      - name: revenue_center_code
        description: Revenue center code for the claim line (institutional only and typically multiple codes per claim).
        meta:
          terminology: https://thetuvaproject.com/terminology/revenue-center
          data_type: varchar
      - name: revenue_center_description
        description: Revenue center description.
        meta:
          data_type: varchar
      - name: service_unit_quantity
        description: The number of units for the particular revenue center code.
        meta:
          data_type: number
      - name: hcpcs_code
        description: The CPT or HCPCS code representing the procedure or service provided. These codes are used to describe medical, surgical, and diagnostic services.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: hcpcs_modifier_1
        description: 1st modifier for HCPCS code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: hcpcs_modifier_2
        description: 2nd modifier for HCPCS code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: hcpcs_modifier_3
        description: 3rd modifier for HCPCS code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: hcpcs_modifier_4
        description: 4th modifier for HCPCS code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: hcpcs_modifier_5
        description: 5th modifier for HCPCS code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: rendering_id
        description: Rendering ID for the claim (typically represents the physician or entity providing services).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: rendering_tin
        description: Rendering provider tax identification number (TIN).
        meta:
          data_type: varchar
      - name: rendering_name
        description: Rendering provider name.
        meta:
          data_type: varchar
      - name: billing_id
        description: Billing ID for the claim (typically represents organization billing the claim).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: billing_tin
        description: Billing provider tax identification number (TIN).
        meta:
          data_type: varchar
      - name: billing_name
        description: Billing provider name.
        meta:
          data_type: varchar
      - name: facility_id
        description: Facility ID for the claim (typically represents the facility where services were performed).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: facility_name
        description: Facility name.
        meta:
          data_type: varchar
      - name: paid_date
        description: The date the claim was paid.
        meta:
          data_type: date
      - name: paid_amount
        description: The total amount paid by the insurer.
        meta:
          data_type: number
      - name: allowed_amount
        description: The total amount allowed (includes amount paid by the insurer and patient).
        meta:
          data_type: number
      - name: charge_amount
        description: The total amount charged for the services provided, before any adjustments or payments. This is typically in US dollars.
        meta:
          data_type: number
      - name: coinsurance_amount
        description: The total coinsurance charged on the claim by the provider.
        meta:
          data_type: number
      - name: copayment_amount
        description: The total copayment charged on the claim by the provider.
        meta:
          data_type: number
      - name: deductible_amount
        description: The total deductible charged on the claim by the provider.
        meta:
          data_type: number
      - name: total_cost_amount
        description: The total amount paid on the claim by different parties.
        meta:
          data_type: number
      - name: in_network_flag
        description: Flag indicating if the claim was in or out of network.
        meta:
          data_type: number
      - name: enrollment_flag
        description: Flag indicating if the claim has corresponding enrollment during the same time period the service occurred.
        meta:
          data_type: number
      - name: member_month_key
        description: The unique combination of person_id, year_month, payer, plan, and data source.
        meta:
          data_type: number
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: file_date
        description: The date associated with the claims file, typically reflecting the reporting period of the claims data.
        meta:
          data_type: date
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__medication
    description: |
      The medication table contains information on medications ordered and/or administered during a patient encounter.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: medication
      tags: core
      materialized: table
    columns:
      - name: medication_id
        description: Unique identifier for each medication in the table.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: dispensing_date
        description: Date the medication was dispensed.
        meta:
          data_type: date
      - name: prescribing_date
        description: Date the medication was prescribed.
        meta:
          data_type: date
      - name: source_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://www.nlm.nih.gov/research/umls/rxnorm/index.html
          data_type: varchar
      - name: source_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: ndc_code
        description: National drug code associated with the medication.
        meta:
          terminology: https://www.fda.gov/drugs/drug-approvals-and-databases/national-drug-code-directory
          data_type: varchar
      - name: ndc_description
        description: Description for the NDC.
        meta:
          data_type: varchar
      - name: ndc_mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: rxnorm_code
        description: RxNorm code associated with the medication.
        meta:
          terminology: https://www.nlm.nih.gov/research/umls/rxnorm/index.html
          data_type: varchar
      - name: rxnorm_description
        description: Description for the RxNorm code.
        meta:
          data_type: varchar
      - name: rxnorm_mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: atc_code
        description: ATC code for the medication.
        meta:
          terminology: https://www.who.int/tools/atc-ddd-toolkit/atc-classification
          data_type: varchar
      - name: atc_description
        description: Description for the ATC code.
        meta:
          data_type: varchar
      - name: atc_mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: route
        description: The route used to administer the medication and/or vaccine.
        meta:
          data_type: varchar
      - name: strength
        description: The strength of the medication.
        meta:
          data_type: varchar
      - name: quantity
        description: The quantity of the medication.
        meta:
          data_type: number
      - name: quantity_unit
        description: The units for the quantity.
        meta:
          data_type: varchar
      - name: days_supply
        description: The number of days supply included.
        meta:
          data_type: number
      - name: practitioner_id
        description: Unique identifier for the practitioner on record (e.g., ordered medication, performed the procedure, etc).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__member_months
    description: The core member months tables has one record per member per month in the eligibility source data.  Members without claims are included in this data table.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: member_months
      tags: core
      materialized: table
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - member_month_key
            - data_source
    columns:
      - name: member_month_key
        description: The unique combination of person_id, year_month, payer, plan, and data source.
        tests:
          - not_null
        meta:
          data_type: number
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: year_month
        description: Unique year-month of in the dataset computed from eligibility.
        meta:
          data_type: varchar
      - name: payer
        description: Name of the payer (i.e. health insurer) providing coverage.
        meta:
          data_type: varchar
      - name: plan
        description: Name of the plan (i.e. sub contract) providing coverage.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: varchar
      - name: payer_attributed_provider
        description: Unique identifier for the provider assigned to this patient-year_month by the payer.
      - name: payer_attributed_provider_practice
        description: Name of the practice for the payer attributed provider.
      - name: payer_attributed_provider_organization
        description: Name of the organization for the payer attributed provider.
      - name: payer_attributed_provider_lob
        description: Name of the line of business for the payer attributed provider (e.g. medicare, medicaid, commercial).
      - name: custom_attributed_provider
        description: Unique identifier for the provider assigned to this patient-year_month by the user.
      - name: custom_attributed_provider_practice
        description: Name of the practice for the attributed provider assigned by the user.
      - name: custom_attributed_provider_organization
        description: Name of the organization for the attributed provider assigned by the user.
      - name: custom_attributed_provider_lob
        description: Name of the line of business for the attributed provider assigned by the user (e.g. medicare, medicaid, commercial).
  - name: core__observation
    description: |
      The observation table contains information on measurements other than lab tests e.g. blood pressure, height, and weight.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: observation
      tags: core
      materialized: table
    columns:
      - name: observation_id
        description: Unique identifier for each observation in the dataset.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
          is_primary_key: true
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: panel_id
        description: Unique identifier for the panel.
        meta:
          data_type: varchar
      - name: observation_date
        description: Date the observation was recorded.
        meta:
          data_type: date
      - name: observation_type
        description: Type of observation.
        meta:
          data_type: varchar
      - name: source_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          data_type: varchar
      - name: source_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: normalized_code_type
        description: The normalized type of code.
        meta:
          data_type: varchar
      - name: normalized_code
        description: The normalized code.
        meta:
          data_type: varchar
      - name: normalized_description
        description: Normalized description of the code.
        meta:
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: result
        description: The result of the record (e.g., lab test, observation, etc).
        meta:
          data_type: varchar
      - name: source_units
        description: Source units of the lab test.
        meta:
          data_type: varchar
      - name: normalized_units
        description: Normalized units of the lab test.
        meta:
          data_type: varchar
      - name: source_reference_range_low
        description: The low end of the reference range from the source system.
        meta:
          data_type: varchar
      - name: source_reference_range_high
        description: The high end of the reference range from the source system.
        meta:
          data_type: varchar
      - name: normalized_reference_range_low
        description: The normalized low end of the reference range.
        meta:
          data_type: varchar
      - name: normalized_reference_range_high
        description: The normalized high end of the reference range.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__patient
    description: |
      The patient table contains demographic and geographic information on patients.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: patient
      tags: core
      materialized: table
    columns:
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
          - unique:
              config:
                severity: error
        meta:
          data_type: varchar
      - name: sex
        description: The gender of the patient.
        meta:
          terminology: https://thetuvaproject.com/terminology/gender
          data_type: varchar
      - name: race
        description: The patient's race.
        meta:
          terminology: https://thetuvaproject.com/terminology/race
          data_type: varchar
      - name: birth_date
        description: The birth date of the patient.
        meta:
          data_type: date
      - name: death_date
        description: Date the patient died if there is one.
        meta:
          data_type: date
      - name: death_flag
        description: A flag indicating if the patient has died.
        data_type: integer
        meta:
          data_type: number
      - name: name_suffix
        description: The name suffixes (e.g., Sr., Jr., III.)
        meta:
          data_type: varchar
      - name: first_name
        description: The first name of the patient.
        meta:
          data_type: varchar
      - name: middle_name
        description: The middle name of the patient.
        meta:
          data_type: varchar
      - name: last_name
        description: The last name of the patient.
        meta:
          data_type: varchar
      - name: social_security_number
        description: The social security number of the patient.
        meta:
          data_type: varchar
      - name: address
        description: The street address of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: city
        description: The city of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: state
        description: The state of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: zip_code
        description: The zip code of the record (e.g., facility location, patient, etc).
        meta:
          data_type: varchar
      - name: county
        description: The county for the patient.
        meta:
          data_type: varchar
      - name: latitude
        description: The latitude of the record (e.g., facility location, patient, etc).
        meta:
          data_type: float
      - name: longitude
        description: The longitude of the record (e.g., facility location, patient, etc).
        meta:
          data_type: float
      - name: phone
        description: The phone number for the patient.
        meta:
          data_type: varchar
      - name: email
        description: The email for the patient
        meta:
          data_type: varchar
      - name: ethnicity
        description: The ethnicity of the patient
        meta:
          terminology: https://thetuvaproject.com/terminology/ethnicity
          data_type: varchar
      - name: age
        description: The age of the patient calculated based on their date of birth and the last time the tuva project was run.
        meta:
          data_type: number
      - name: age_group
        description: The decade age group the patient falls into based on their calculated age.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__person_id_crosswalk
    description: |
      The person id crosswalk table contains all source patient identifiers from  the input layer eligibility (claims) and patient (clinical).
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: person_id_crosswalk
      tags: core
      materialized: table
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - person_id
            - patient_id
            - member_id
            - payer
            - '{{ quote_column("plan") }}'
            - data_source
    columns:
      - name: person_id
        description: Unique identifier for each person in the dataset.
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: payer
        description: Name of the payer (i.e. health insurer) providing coverage.
        meta:
          data_type: varchar
      - name: plan
        description: Name of the plan (i.e. sub contract) providing coverage.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__pharmacy_claim
    description: |
      The pharmacy claim table contains information on prescription drugs that were filled and billed to the insurer.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: pharmacy_claim
      tags: core
      materialized: table
    columns:
      - name: pharmacy_claim_id
        description: Unique identifier for each row in the table.
        tests:
          - unique
          - not_null
        meta:
          data_type: varchar
      - name: claim_id
        description: Unique identifier for a claim. Each claim represents a distinct healthcare service or set of services provided to a patient.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: claim_line_number
        description: Indicates the line number for the particular line of the claim.
        tests:
          - not_null
        data_type: integer
        meta:
          data_type: number
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: payer
        description: Name of the payer (i.e. health insurer) providing coverage.
        meta:
          data_type: varchar
      - name: plan
        description: Name of the plan (i.e. sub contract) providing coverage.
        meta:
          data_type: varchar
      - name: prescribing_provider_id
        description: ID for the provider that wrote the prescription (e.g. priamry care physician).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: prescribing_provider_name
        description: Prescribing provider name.
        meta:
          data_type: varchar
      - name: dispensing_provider_id
        description: ID for the provider that dispensed the prescription (e.g. pharmacy).
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: dispensing_provider_name
        description: Dispensing provider name.
        meta:
          data_type: varchar
      - name: dispensing_date
        description: Date the medication was dispensed.
        meta:
          data_type: date
      - name: ndc_code
        description: National drug code associated with the medication.
        meta:
          terminology: https://www.fda.gov/drugs/drug-approvals-and-databases/national-drug-code-directory
          data_type: varchar
      - name: ndc_description
        description: Description for the NDC.
        meta:
          data_type: varchar
      - name: quantity
        description: The quantity of the medication.
        data_type: integer
        meta:
          data_type: number
      - name: days_supply
        description: The number of days supply included.
        data_type: integer
        meta:
          data_type: number
      - name: refills
        description: Number of refills for the prescription.
        data_type: integer
        meta:
          data_type: number
      - name: paid_date
        description: The date the claim was paid.
        meta:
          data_type: date
      - name: paid_amount
        description: The total amount paid by the insurer.
        meta:
          data_type: number
      - name: allowed_amount
        description: The total amount allowed (includes amount paid by the insurer and patient).
        meta:
          data_type: number
      - name: charge_amount
        description: The total amount charged for the services provided, before any adjustments or payments. This is typically in US dollars.
        meta:
          data_type: number
      - name: coinsurance_amount
        description: The total coinsurance charged on the claim by the provider.
        meta:
          data_type: number
      - name: copayment_amount
        description: The total copayment charged on the claim by the provider.
        meta:
          data_type: number
      - name: deductible_amount
        description: The total deductible charged on the claim by the provider.
        meta:
          data_type: number
      - name: in_network_flag
        description: Flag indicating if the claim was in or out of network.
        meta:
          data_type: number
      - name: enrollment_flag
        description: Flag indicating if the claim has corresponding enrollment during the same time period the service occurred.
        meta:
          data_type: number
      - name: member_month_key
        description: The unique combination of person_id, year_month, payer, plan, and data source.
        meta:
          data_type: number
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: file_date
        description: The date associated with the claims file, typically reflecting the reporting period of the claims data.
        meta:
          data_type: date
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: varchar
  - name: core__practitioner
    description: |
      The practitioner table contains information on the providers in the  dataset e.g. physicians, physicians assistants, etc.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: practitioner
      tags: core
      materialized: table
    columns:
      - name: practitioner_id
        description: Unique identifier for the practitioner on record (e.g., ordered medication, performed the procedure, etc).
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
      - name: npi
        description: The national provider identifier associated with the record e.g. facility_npi, provider_npi
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: provider_first_name
        description: The first name of the healthcare provider.
        meta:
          data_type: varchar
      - name: provider_last_name
        description: The last name of the healthcare provider.
        meta:
          data_type: varchar
      - name: practice_affiliation
        description: Practice affiliation of the provider.
        meta:
          data_type: varchar
      - name: specialty
        description: Specialty of the provider.
        meta:
          data_type: varchar
      - name: sub_specialty
        description: Sub specialty of the provider.
        meta:
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__procedure
    description: |
      The procedure table contains information on procedures that were performed on patients in the dataset.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: procedure
      tags: core
      materialized: table
    columns:
      - name: procedure_id
        description: The unique identifier for the performed procedure.
        tests:
          - unique:
              config:
                severity: warn
        meta:
          data_type: varchar
          is_primary_key: true
      - name: encounter_id
        description: Unique identifier for each encounter in the dataset.
        meta:
          data_type: varchar
      - name: claim_id
        description: Unique identifier for a claim. Each claim represents a distinct healthcare service or set of services provided to a patient.
        meta:
          data_type: varchar
      - name: person_id
        description: Unique identifier for each person in the dataset.
        tests:
          - not_null
        meta:
          data_type: varchar
      - name: member_id
        description: Identifier that links a patient to a particular insurance product or health plan. A patient can have more than one member_id because they can have more than one insurance product/plan.
        meta:
          data_type: varchar
      - name: patient_id
        description: Identifier that links a patient to a particular clinical source system.
        meta:
          data_type: varchar
      - name: procedure_date
        description: Date when the procedure was performed.
        meta:
          data_type: varchar
      - name: source_code_type
        description: The type of code reported in the source system (e.g., ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: source_code
        description: The code in the source system (e.g., the ICD-10 code, NDC, lab, etc)
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-pcs
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: source_description
        description: Description of the source code in the source system.
        meta:
          data_type: varchar
      - name: normalized_code_type
        description: The normalized type of code.
        meta:
          terminology: https://thetuvaproject.com/terminology/code-type
          data_type: varchar
      - name: normalized_code
        description: The normalized code.
        meta:
          terminology: https://thetuvaproject.com/terminology/icd-10-pcs
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: normalized_description
        description: Normalized description of the code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: mapping_method
        description: mapping method used to populate the normalized codes and descriptions.  Can be manual (fields were populated in input layer), automatic (dictionary codes matching the source code were found and was automatically populated) or custom (populated by normalization engine)
        meta:
          data_type: varchar
      - name: modifier_1
        description: First modifier for the procedure code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: modifier_2
        description: Second modifier for the procedure code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: modifier_3
        description: Third modifier for the procedure code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: modifier_4
        description: Fourth modifier for the procedure code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: modifier_5
        description: Fifth modifier for the procedure code.
        meta:
          terminology: https://thetuvaproject.com/terminology/hcpcs-level-2
          data_type: varchar
      - name: practitioner_id
        description: Unique identifier for the practitioner on record (e.g., ordered medication, performed the procedure, etc).
        meta:
          data_type: varchar
        meta:
          terminology: https://thetuvaproject.com/terminology/provider
          terminology_note: '**Note: this terminology set is too large to be loaded as a seed and is instead loaded from public cloud storage for supported adapters.'
          data_type: varchar
      - name: data_source
        description: User-configured field that indicates the data source.
        meta:
          data_type: varchar
      - name: tuva_last_run
        description: The last time the data was refreshed. Generated by `dbt_utils.pretty_time` as the local time of the `dbt run` environment. Timezone is configurable via the `tuva_last_run` var.
        meta:
          data_type: timestamp
  - name: core__stg_claims_medical_claim
    description: Staging core medical claims
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_medical_claim
      tags:
        - core
        - core_stage_claims
        - encounters
      materialized: table
  - name: core__stg_claims_encounter
    description: Staging core claims encounters
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_encounter
      tags:
        - core
        - core_stage_claims
        - encounters
      materialized: table
  - name: core__stg_claims_location
    description: Staging core claims locations
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_location
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_claims_member_months
    description: Staging core member months
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_member_months
      tags:
        - core
        - core_stage_claims
      materialized: view
  - name: core__stg_claims_patient
    description: Staging core claims patients
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_patient
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_claims_condition
    description: Staging core claims conditions
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_condition
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_claims_procedure
    description: Staging core claims procedures
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_procedure
      tags:
        - core
        - core_ stage_claims
      materialized: table
  - name: core__stg_claims_pharmacy_claim
    description: Staging core pharmacy claims
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_pharmacy_claim
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_claims_eligibility
    description: Staging core eligibility
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_eligibility
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_claims_practitioner
    description: Staging core providers in the claims dataset
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_claims_practitioner
      tags:
        - core
        - core_stage_claims
      materialized: table
  - name: core__stg_clinical_appointment
    description: Staging core clinical appointments
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_appointment
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_condition
    description: Staging core clinical conditions
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_condition
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_encounter
    description: Staging core clinical encounters
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_encounter
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_immunization
    description: Staging core clinical immunization
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_immunization
      tags: core_stage_clinical
      materialized: view
  - name: core__stg_clinical_lab_result
    description: Staging core clinical lab results
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_lab_result
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_location
    description: Staging core clinical locations
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_location
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_medication
    description: Staging core clinical medications
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_medication
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_observation
    description: Staging core clinical observations
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_observation
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_patient
    description: Staging core clinical patients
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_patient
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_practitioner
    description: Staging core clinical providers
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_practitioner
      tags:
        - core
        - core_stage_clinical
      materialized: view
  - name: core__stg_clinical_procedure
    description: Staging core clinical procedures
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
        {% else %}core{%- endif -%}
      alias: _stg_clinical_procedure
      tags:
        - core
        - core_stage_clinical
      materialized: view
