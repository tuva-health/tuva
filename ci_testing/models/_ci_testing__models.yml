version: 2

models:
# claim input models
  - name: eligibility
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - claims
        - input_layer
      materialized: table

  - name: medical_claim
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - claims
        - input_layer
      materialized: table

  - name: pharmacy_claim
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - claims
        - input_layer
      materialized: table

  - name: provider_attribution
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - attribution
        - input_layer
      materialized: table


# clinical input models
  - name: appointment
    description: Created from seed or source data depending on test_data_override variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: condition
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: encounter
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table
      
  - name: immunization
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: lab_result
    description: Created from seed or source data depending on use_synthetic_data variable.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: location
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: medication
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: observation
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: patient
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: practitioner
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

  - name: procedure
    description: Created using empty table logic.
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - clinical
        - input_layer
      materialized: table

# optional mart data
  - name: hedis_cql_engine_log
    description: | 
      Optional mart input. This table contains a detailed log of computations 
      of the CQL produced from HEDIS Digital Quality Measures (dQM).
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - hedis
        - quality_measures
        - input_layer
      materialized: table

  - name: hedis_measure_report
    description: |
      Optional mart input. This table contains quality measure report data from 
      HEDIS Digital Quality Measures (dQM).
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}_{{var('tuva_schema_prefix')}}input_layer
        {% else %}input_layer{%- endif -%}
      tags:
        - hedis
        - quality_measures
        - input_layer
      materialized: table